<!DOCTYPE html>
<html>
<head>
	<title>Percentage Timer</title>
	<style>
		body {
			background-color: #f0f0f0;
			font-family: Arial, sans-serif;
		}
		h1 {
			text-align: center;
			margin-top: 50px;
			color: #4CAF50;
		}
		.container {
			margin: 0 auto;
			width: 400px;
			padding: 20px;
			background-color: #fff;
			box-shadow: 0 0 10px rgba(0,0,0,0.2);
			border-radius: 5px;
		}
		label {
			display: block;
			margin-bottom: 10px;
			font-weight: bold;
			color: #555;
		}
		input[type="text"] {
			width: 100%;
			padding: 10px;
			border: 2px solid #ccc;
			border-radius: 4px;
			box-sizing: border-box;
			margin-bottom: 20px;
			font-size: 16px;
		}
		button {
			background-color: #4CAF50;
			color: #fff;
			padding: 10px 20px;
			border: none;
			border-radius: 4px;
			cursor: pointer;
			font-size: 16px;
			margin-bottom: 20px;
            transition: background-color 0.5s;
		}
		button:hover {
			background-color: #d13131;
		}
		#progress-bar-container {
			width: 100%;
			height: 15px;
			background-color: #ccc;
			margin-bottom: 20px;
			border-radius: 5px;
			overflow: hidden;
		}
		#progress-bar {
			width: 0%;
			height: 100%;
			background-color: #4CAF50;
			transition: width 1s ease-in-out;
		}
		#percent {
			font-size: 20px;
			font-weight: bold;
			color: #555;
			margin-bottom: 20px;
		}
	</style>
</head>
<body>
	<h1>Percentage Timer</h1>
	<div class="container">
		<label for="starttime" title="Enter the start time in the format hh:mm:ss">Start:</label>
		<input type="text" id="starttime" placeholder = "hh:mm:ss">
		<label for="stoptime" title="Enter the stop time in the format hh:mm:ss">Stop:</label>
		<input type="text" id="stoptime" placeholder = "hh:mm:ss">
		<button onclick="startLoop()">Start Timer</button>
		<p id="percent"></p>
		<div id="progress-bar-container">
			<div id="progress-bar"></div>
		</div>
	</div>
	<script>
		function getCurrentTime() {
			const now = new Date()
			const currentTime = now.toLocaleTimeString('en-US', {hour12: false})
			return currentTime;
		}

		function timeToDecimal(timenow) {
			const time = timenow.split(':')
			const hours = parseInt(time[0], 10)
			const minutes = parseInt(time[1], 10)
			const seconds = parseInt(time[2], 10) || 0 // handle missing seconds
			const totalSeconds = (hours * 3600) + (minutes * 60) + seconds
			return totalSeconds;
		}

		function percentage() {
			const start = document.getElementById("starttime").value
			const stop = document.getElementById("stoptime").value
			var percent = (timeToDecimal(getCurrentTime())-timeToDecimal(start)) / (timeToDecimal(stop)-timeToDecimal(start)) * 100
			if (percent.toFixed(2) >= 100){
                return percent = 100
            }
            return percent.toFixed(2)
            
        }
        function updateProgressBar() {
		const percent = percentage()
		document.getElementById("percent").innerHTML = percent + "%"
		document.getElementById("progress-bar").style.width = percent + "%"
		if (percent >= 100) {
			clearInterval(intervalId)
		}
	}

	function startLoop() {
		intervalId = setInterval(updateProgressBar, 1000)
		if(isNaN(document.getElementById("starttime")) || isNan(document.getElementById("stoptime"))){
			return
		}
	}
</script>

